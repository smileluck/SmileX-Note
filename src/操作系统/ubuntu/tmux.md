- [tmux 常用指令整理](#tmux-常用指令整理)
  - [先明确tmux核心概念（新手必看）](#先明确tmux核心概念新手必看)
  - [一、基础操作（启动/退出/脱离）](#一基础操作启动退出脱离)
  - [二、会话管理（核心高频）](#二会话管理核心高频)
  - [三、窗口管理（会话内多窗口）](#三窗口管理会话内多窗口)
  - [四、面板管理（窗口内分屏，最常用）](#四面板管理窗口内分屏最常用)
  - [五、其他实用快捷键](#五其他实用快捷键)
  - [补充：基础滚动方式（复制模式，tmux原生）](#补充基础滚动方式复制模式tmux原生)
    - [一、基础滚动方式（复制模式，tmux原生）](#一基础滚动方式复制模式tmux原生)
      - [1. 进入复制模式](#1-进入复制模式)
      - [2. 滚动操作（两种方式）](#2-滚动操作两种方式)
      - [3. 退出复制模式](#3-退出复制模式)
    - [二、优化滚动体验（开启鼠标支持）](#二优化滚动体验开启鼠标支持)
      - [1. 临时开启（当前会话生效）](#1-临时开启当前会话生效)
      - [2. 永久开启（所有会话生效，推荐）](#2-永久开启所有会话生效推荐)
    - [补充：其他实用技巧](#补充其他实用技巧)
    - [总结](#总结)
    - [总结](#总结-1)


# tmux 常用指令整理

你想要了解tmux的常用指令，以便高效使用这个终端复用工具来管理多个会话、窗口和面板，下面我会按使用场景整理最核心、最常用的指令，兼顾新手易理解和实用性。

## 先明确tmux核心概念（新手必看）
- **会话（Session）**：一个独立的tmux运行环境，可后台运行，脱离终端也不中断
- **窗口（Window）**：一个会话里的多个独立终端窗口（类似浏览器标签页）
- **面板（Pane）**：一个窗口里的分屏（类似终端分屏工具）
- **前缀键**：tmux大部分操作需要先按前缀键（默认是 `Ctrl+b`），再按对应快捷键，下文简写为 `Prefix`

---

## 一、基础操作（启动/退出/脱离）
| 指令/快捷键          | 作用                                                       |
| -------------------- | ---------------------------------------------------------- |
| `tmux` / `tmux new`  | 启动一个新的无名会话                                       |
| `tmux new -s 会话名` | 启动命名会话（推荐，比如 `tmux new -s dev`）               |
| `exit` / `Ctrl+d`    | 关闭当前会话（退出tmux）                                   |
| `Prefix + d`         | 临时脱离会话（会话后台运行，不会中断里面的程序，核心常用） |
| `tmux kill-server`   | 关闭所有tmux会话（谨慎使用）                               |

## 二、会话管理（核心高频）
| 指令/快捷键                        | 作用                                                                     |
| ---------------------------------- | ------------------------------------------------------------------------ |
| `tmux ls`                          | 列出所有后台会话（查看会话名/ID、窗口数）                                |
| `tmux a -t 会话名/ID`              | 重新连接（附加）指定会话（`a` 是 `attach` 的简写，比如 `tmux a -t dev`） |
| `tmux rename-session -t 旧名 新名` | 重命名会话（比如 `tmux rename-session -t dev web`）                      |
| `Prefix + $`                       | 在会话内直接重命名当前会话                                               |
| `tmux kill-session -t 会话名`      | 关闭指定会话（比如 `tmux kill-session -t dev`）                          |
| `Prefix + s`                       | 会话选择界面（可视化切换/关闭会话，新手友好）                            |

## 三、窗口管理（会话内多窗口）
| 指令/快捷键                           | 作用                                                   |
| ------------------------------------- | ------------------------------------------------------ |
| `Prefix + c`                          | 新建窗口（默认无名，会按数字编号）                     |
| `tmux new-window -n 窗口名 -t 会话名` | 新建命名窗口（比如 `tmux new-window -n log -t dev`）   |
| `Prefix + 数字`                       | 切换到对应编号的窗口（比如 `Prefix + 0` 切第一个窗口） |
| `Prefix + n`                          | 切换到下一个窗口                                       |
| `Prefix + p`                          | 切换到上一个窗口                                       |
| `Prefix + ,`                          | 重命名当前窗口                                         |
| `Prefix + &`                          | 关闭当前窗口（会提示确认，按y确认）                    |

## 四、面板管理（窗口内分屏，最常用）
| 指令/快捷键                            | 作用                                                     |
| -------------------------------------- | -------------------------------------------------------- |
| `Prefix + %`                           | 垂直分割面板（左右分屏）                                 |
| `Prefix + "`                           | 水平分割面板（上下分屏）                                 |
| `Prefix + 方向键`                      | 切换到对应方向的面板（比如按↓切到下方面板）              |
| `Prefix + o`                           | 循环切换所有面板                                         |
| `Prefix + x`                           | 关闭当前面板（提示确认，按y）                            |
| `Prefix + z`                           | 最大化/还原当前面板（临时放大某个面板，超实用）          |
| `Prefix + :` 后输入 `resize-pane -D 5` | 调整面板大小（-D向下/-U向上/-L向左/-R向右，5是调整格数） |
| `Prefix + !`                           | 将当前面板拆分为新窗口                                   |

## 五、其他实用快捷键
| 快捷键       | 作用                                   |
| ------------ | -------------------------------------- |
| `Prefix + ?` | 查看所有tmux快捷键（按q退出）          |
| `Prefix + t` | 显示时钟（按q退出）                    |
| `Prefix + [` | 进入复制模式（按空格开始选，回车复制） |

## 补充：基础滚动方式（复制模式，tmux原生）

### 一、基础滚动方式（复制模式，tmux原生）
这是tmux最核心的滚动方式，需要先进入「复制模式」，操作步骤如下：

#### 1. 进入复制模式
按下 tmux 前缀键（默认 `Ctrl+b`），松开后再按 `[` 键（左中括号），此时终端左下角会显示 `[0/xxxx]` 之类的提示，说明已进入复制模式。

#### 2. 滚动操作（两种方式）
- **方式1：方向键滚动（新手友好）**
  直接按 ↑/↓ 键向上/向下滚动，按 ←/→ 键向左/向右滚动（应对单行内容过长的情况）。
- **方式2：PageUp/PageDown 滚动（高效）**
  按 `PageUp`（上翻页）、`PageDown`（下翻页），一次滚动一屏内容，比方向键效率高。

#### 3. 退出复制模式
按 `q` 键即可退出，回到正常的终端交互状态。

### 二、优化滚动体验（开启鼠标支持）
如果觉得按键滚动麻烦，可以开启tmux的鼠标支持，直接用鼠标滚轮滚动，还能点击切换面板/窗口，步骤如下：

#### 1. 临时开启（当前会话生效）
按下前缀键 `Ctrl+b`，松开后按 `:` 键（冒号），此时tmux底部会出现命令输入框，输入以下指令并回车：
```bash
set -g mouse on
```

#### 2. 永久开启（所有会话生效，推荐）
编辑tmux的配置文件（没有则新建）：
```bash
vim ~/.tmux.conf
```
在文件中添加以下内容：
```bash
# 开启鼠标支持（滚动、点击面板/窗口、调整面板大小）
set -g mouse on
# 优化鼠标滚动的顺滑度（可选）
set -g history-limit 100000  # 增加历史输出缓存行数（默认只有2000行）
```
保存退出后，执行以下指令让配置生效：
```bash
tmux source ~/.tmux.conf
```

开启鼠标支持后，无需进入复制模式，直接用鼠标滚轮就能滚动查看当前面板的历史输出，还能：
- 点击面板分割线拖动，调整面板大小；
- 点击窗口标签切换窗口；
- 选中文字直接复制（部分终端需配合 `Shift` 键）。

### 补充：其他实用技巧
- 进入复制模式后，按 `g` 跳转到输出最顶部，按 `G` 跳转到最底部；
- 如果滚动时发现历史内容不全，是因为tmux默认只缓存2000行，通过 `set -g history-limit 100000` 可扩大缓存（如上）；
- 部分终端（如xterm）可能需要先开启鼠标报告，可在 `.tmux.conf` 中加 `set -g terminal-overrides 'xterm*:smcup@:rmcup@'`。

### 总结
1. 临时滚动：按 `Ctrl+b + [` 进入复制模式，用方向键/PageUp/PageDown 滚动，`q` 退出；
2. 永久便捷滚动：在 `~/.tmux.conf` 中添加 `set -g mouse on`，开启鼠标滚轮直接滚动；
3. 优化体验：增加 `history-limit` 扩大历史缓存行数，避免滚动时看不到早期输出。

新手优先推荐开启鼠标支持，能大幅降低操作成本，满足日常90%以上的滚动需求。

---

### 总结
1. tmux核心是「会话-窗口-面板」三层结构，`Ctrl+b`（前缀键）是大部分操作的触发入口；
2. 日常高频操作：命名启动会话（`tmux new -s 名`）、脱离会话（`Prefix+d`）、重新连接（`tmux a -t 名`）、分屏（`Prefix+%/""`）；
3. 脱离会话不会中断程序运行，这是tmux最核心的价值（比如远程服务器跑脚本，断开连接也不终止）。

如果是新手，先记住「命名启动→分屏→脱离→重新连接」这一套流程，就能满足80%的日常使用需求。