
## 专有名词
- Wi-Fi路由器：即家庭中常用的Wi-Fi路由器，家中的设备可共同连接到此节点形成局域网
- SSID：Wi-Fi名称，其本意是Service Set Identifier，服务集标识
- password：Wi-Fi密码
- 物联网设备：可以连接网络的智能设备，如智能音箱，智能插座，网络摄像头等
- 待配网设备：物联网设备刚开箱或恢复了出厂设置，需要配网
- 已配网设备：已经连接Wi-FI的物联网设备
- 手机APP：即智能手机，通过安装物联网设备对应的APP软件，来更方便地使用设备
- 物联网平台：用于管理物联网设备的云端服务器
- Wi-Fi模块：物联网设备上的Wi-Fi电子模块，用于连接互联网


## 常见的配网方案
> https://cloud.tencent.com/developer/article/1883810
该网页围绕物联网设备Wi-Fi配网展开，先介绍背景与基础知识，再详细阐述7种配网方案，最后归纳各方案特点，为理解物联网设备联网方式提供全面参考，具体总结如下：

### 一、背景与Wi-Fi基础知识
1. **背景**：物联网时代，智能门锁、摄像头等设备需联网才能实现监控、操控等功能，而联网第一步就是将设备连接到Wi-Fi路由器，由此引出Wi-Fi配网问题。
2. **Wi-Fi工作模式**
    - **STA模式**：即无线终端模式，设备（如摄像头、电视）通过连接AP热点（如路由器）接入网络。
    - **AP模式**：即热点模式，设备自身可作为无线热点，供其他设备（如手机）连接，常见于设备配网初始阶段。
3. **核心专业名词**：包括提供网络接入的Wi-Fi路由器、代表Wi-Fi名称的SSID、用于身份验证的Wi-Fi密码、待配网（刚开箱/恢复出厂）与已配网（已连Wi-Fi）的物联网设备、用于操作设备的手机APP，以及管理设备的物联网平台和实现联网的Wi-Fi模块。

### 二、7种物联网设备Wi-Fi配网方案
以无线网络摄像头为示例设备，各方案原理与流程如下：
1. **设备热点配网（dev-ap-config）**
    - **流程**：待配网设备按配网键进入AP模式，开启约定名称热点；手机APP扫设备二维码获ProductKey，连接设备热点；手机通过TCP/UDP将路由器SSID和密码发给设备；设备切换为STA模式，连接路由器完成配网。
    - **关键**：依赖设备自身创建热点，手机与设备先建局域网传输信息。
2. **手机热点配网（phone-ap-config）**
    - **流程**：手机APP启动预定义热点（如名abc、密码12345678）；待配网设备按配网键进入配网模式，连接手机热点；手机发送路由器配网信息给设备；设备断开手机热点，切STA模式连路由器。
    - **关键**：热点由手机创建，设备无需具备热点创建能力。
3. **蓝牙配网（ble-config）**
    - **流程**：待配网设备按配网键开启BLE并广播；手机APP开启蓝牙，搜索并连接设备；手机通过BLE发送路由器配网信息；设备切STA模式连路由器，配网后关闭BLE。
    - **关键**：需设备和APP均支持BLE，用蓝牙替代热点传输信息。
4. **零配配网（zero-config）**
    - **流程**：待配网设备按配网键，向已配网的主配设备发配网请求；主配设备向物联网平台上报新设备；平台向手机APP获取待配设备信息，APP反馈后，平台下发配网许可和密钥给主配设备；主配设备加密推送路由器配网信息给待配设备；待配设备切STA模式连路由器。
    - **关键**：无需用户输入配网信息，依赖主配设备（已连Wi-Fi）和管理帧传输信息，要求主配与待配设备能收发802.11管理帧。
5. **一键配网（smart-config）**
    - **流程**：用户在手机APP输入路由器配网信息，手机广播该信息；待配网设备按配网键进入sniffer（混杂）模式，在1-13信道轮询监听所有802.11报文；设备捕获符合规则的报文后停止轮询，接收完整信息；解密后切STA模式连路由器。
    - **关键**：用户仅需在APP输入信息，设备靠监听广播获取配网数据，需轮询信道找目标信号。
6. **路由器配网（router-config）**
    - **流程**：待配网设备按配网键进入混杂模式，扫描周围热点；用户按路由器配网键，路由器开启特定配网热点；设备连接该特定热点，获取配网信息；路由器切换为常规热点，设备连接常规热点完成配网。
    - **关键**：依赖定制路由器，需先连路由器特定热点获取信息，再切常规热点。
7. **扫码配网（webcam-config）**
    - **流程**：待配网设备按配网键，进入扫码配网模式；用户在手机APP输入路由器配网信息，生成含该信息的二维码；设备用自带摄像头扫描二维码，解码获取配网信息；切STA模式连路由器。
    - **关键**：要求设备自带摄像头且具备二维码解码能力，信息通过二维码传递。

### 三、各配网方案核心特点对比
|配网方式|配网信息交互方式|特殊要求|成功率|通用性|
| ---- | ---- | ---- | ---- | ---- |
|设备热点配网|AP-STA链路通信|无|高|高|
|手机热点配网|AP-STA链路通信|无|中|中|
|蓝牙配网|BLE通信|设备支持BLE|高|中|
|零配配网|管理帧广播|需已配网的主配设备|高|低|
|一键配网|手机广播|无|低|高|
|路由器配网|路由器广播|需定制路由器|高|低|
|扫码配网|二维码数据解析|设备带可扫码摄像头|高|低|
